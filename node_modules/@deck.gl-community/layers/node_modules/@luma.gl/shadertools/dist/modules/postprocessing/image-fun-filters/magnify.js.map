{"version":3,"file":"magnify.js","names":["glsl","fs","magnify","name","uniformTypes","screenXY","radiusPixels","zoom","borderWidthPixels","borderColor","uniformPropTypes","value","passes","sampler"],"sources":["../../../../src/modules/postprocessing/image-fun-filters/magnify.ts"],"sourcesContent":["// luma.gl, MIT license\n// Copyright (c) vis.gl contributors\n\nimport {ShaderPass} from '../../../lib/shader-module/shader-pass';\nimport {glsl} from '../../../lib/glsl-utils/highlight';\n\nconst fs = glsl`\\\nuniform magnifyUniforms {\n  vec2 screenXY;\n  float radiusPixels;\n  float zoom;\n  float borderWidthPixels;\n  vec4 borderColor;\n} magnify;\n\nvec4 magnify_sampleColor(sampler2D source, vec2 texSize, vec2 texCoord) {\n  vec2 pos = vec2(magnify.screenXY.x, 1.0 - magnify.screenXY.y);\n  float dist = distance(texCoord * texSize, pos * texSize);\n  if (dist < magnify.radiusPixels) {\n    return texture(source, (texCoord - pos) / magnify.zoom + pos);\n  }\n\n  if (dist <= magnify.radiusPixels + magnify.borderWidthPixels) {\n    return magnify.borderColor;\n  }\n  return texture(source, texCoord);\n}\n`;\n\n/** \n * Magnify - display a circle with magnify effect applied to surrounding the pixels given position \n */\nexport type MagnifyProps = {\n  /** x, y position in screen coords, both x and y is normalized and in range `[0, 1]`. `[0, 0]` is the up left corner, `[1, 1]` is the bottom right corner. Default value is `[0, 0]`. */\n  screenXY?: number[];\n  /** effect radius in pixels. Default value is `100`. */\n  radiusPixels?: number;\n  /** magnify level. Default value is `2`. */\n  zoom?: number;\n  /** border width of the effect circle, will not show border if value <= 0.0. Default value is `0`. */\n  borderWidthPixels?: number;\n  /** border color of the effect circle. Default value is `[255, 255, 255, 255]`. */\n  borderColor?: number[];\n};\n\n/**\n * Magnify - display a circle with magnify effect applied to surrounding the pixels given position\n */\nexport const magnify: ShaderPass<MagnifyProps, MagnifyProps> = {\n  name: 'magnify',\n  uniformTypes: {\n    screenXY: 'vec2<f32>',\n    radiusPixels: 'f32',\n    zoom: 'f32',\n    borderWidthPixels: 'f32',\n    borderColor: 'vec4<f32>',\n  },\n  uniformPropTypes: {\n    // range 0 to 1\n    screenXY: {value: [0, 0]},\n    radiusPixels: 200,\n    zoom: 2.0,\n    borderWidthPixels: 0.0,\n    borderColor: {value: [255, 255, 255, 255]}\n  },\n  fs,\n  passes: [{sampler: true}]\n};\n"],"mappings":"SAIQA,IAAI;AAEZ,MAAMC,EAAE,GAAGD,IAAK;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAqBD,OAAO,MAAME,OAA+C,GAAG;EAC7DC,IAAI,EAAE,SAAS;EACfC,YAAY,EAAE;IACZC,QAAQ,EAAE,WAAW;IACrBC,YAAY,EAAE,KAAK;IACnBC,IAAI,EAAE,KAAK;IACXC,iBAAiB,EAAE,KAAK;IACxBC,WAAW,EAAE;EACf,CAAC;EACDC,gBAAgB,EAAE;IAEhBL,QAAQ,EAAE;MAACM,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC;IAAC,CAAC;IACzBL,YAAY,EAAE,GAAG;IACjBC,IAAI,EAAE,GAAG;IACTC,iBAAiB,EAAE,GAAG;IACtBC,WAAW,EAAE;MAACE,KAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG;IAAC;EAC3C,CAAC;EACDV,EAAE;EACFW,MAAM,EAAE,CAAC;IAACC,OAAO,EAAE;EAAI,CAAC;AAC1B,CAAC"}