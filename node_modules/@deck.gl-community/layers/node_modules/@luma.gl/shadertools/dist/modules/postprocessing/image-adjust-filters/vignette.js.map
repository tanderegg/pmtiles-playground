{"version":3,"file":"vignette.js","names":["glsl","fs","vignette","name","uniformTypes","radius","amount","uniformPropTypes","value","min","max","passes","filter"],"sources":["../../../../src/modules/postprocessing/image-adjust-filters/vignette.ts"],"sourcesContent":["// luma.gl, MIT license\n// Copyright (c) vis.gl contributors\n\nimport {ShaderPass} from '../../../lib/shader-module/shader-pass';\nimport {glsl} from '../../../lib/glsl-utils/highlight';\n\nconst fs = glsl`\\\nuniform vignetteUniforms {\n  float radius;\n  float amount;\n} vignette;\n\nvec4 vignette_filterColor(vec4 color, vec2 texCoord) {\n  float dist = distance(texCoord, vec2(0.5, 0.5));\n  float ratio = smoothstep(0.8, vignette.radius * 0.799, dist * (vignette.amount + vignette.radius));\n  return color.rgba * ratio + (1.0 - ratio)*vec4(0.0, 0.0, 0.0, 1.0);\n}\n\nvec4 vignette_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  return vignette_filterColor(color, texCoord);\n}\n`;\n\n/**\n * Vignette - Adds a simulated lens edge darkening effect.\n */\nexport type VignetteProps = {\n  /** 0 to 1 (0 for center of frame, 1 for edge of frame) */\n  radius?: number;\n  /** 0 to 1 (0 for no effect, 1 for maximum lens darkening) */\n  amount?: number;\n};\n\n/**\n * Vignette -\n * Adds a simulated lens edge darkening effect.\n */\nexport const vignette: ShaderPass<VignetteProps, VignetteProps> = {\n  name: 'vignette',\n  fs,\n  uniformTypes: {\n    radius: 'f32',\n    amount: 'f32'\n  },\n  uniformPropTypes: {\n    radius: {value: 0.5, min: 0, max: 1},\n    amount: {value: 0.5, min: 0, max: 1}\n  },\n  passes: [{filter: true}]\n};\n"],"mappings":"SAIQA,IAAI;AAEZ,MAAMC,EAAE,GAAGD,IAAK;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAgBD,OAAO,MAAME,QAAkD,GAAG;EAChEC,IAAI,EAAE,UAAU;EAChBF,EAAE;EACFG,YAAY,EAAE;IACZC,MAAM,EAAE,KAAK;IACbC,MAAM,EAAE;EACV,CAAC;EACDC,gBAAgB,EAAE;IAChBF,MAAM,EAAE;MAACG,KAAK,EAAE,GAAG;MAAEC,GAAG,EAAE,CAAC;MAAEC,GAAG,EAAE;IAAC,CAAC;IACpCJ,MAAM,EAAE;MAACE,KAAK,EAAE,GAAG;MAAEC,GAAG,EAAE,CAAC;MAAEC,GAAG,EAAE;IAAC;EACrC,CAAC;EACDC,MAAM,EAAE,CAAC;IAACC,MAAM,EAAE;EAAI,CAAC;AACzB,CAAC"}