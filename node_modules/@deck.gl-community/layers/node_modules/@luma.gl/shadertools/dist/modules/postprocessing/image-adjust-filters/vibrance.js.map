{"version":3,"file":"vibrance.js","names":["glsl","fs","vibrance","name","uniformPropTypes","amount","value","min","max","passes","filter"],"sources":["../../../../src/modules/postprocessing/image-adjust-filters/vibrance.ts"],"sourcesContent":["// luma.gl, MIT license\n// Copyright (c) vis.gl contributors\n\nimport {ShaderPass} from '../../../lib/shader-module/shader-pass';\nimport {glsl} from '../../../lib/glsl-utils/highlight';\n\nconst fs = glsl`\\\nuniform vibranceUniforms {\n  float amount;\n} vibrance;\n\nvec4 vibrance_filterColor(vec4 color) {\n  float average = (color.r + color.g + color.b) / 3.0;\n  float mx = max(color.r, max(color.g, color.b));\n  float amt = (mx - average) * (-vibrance.amount * 3.0);\n  color.rgb = mix(color.rgb, vec3(mx), amt);\n  return color;\n}\n\nvec4 vibrance_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  return vibrance_filterColor(color);\n}\n`;\n\n/**\n * Vibrance - Modifies the saturation of desaturated colors, leaving saturated colors unmodified.\n */\nexport type VibranceProps = {\n  /** -1 to 1 (-1 is minimum vibrance, 0 is no change, and 1 is maximum vibrance) */\n  amount?: number;\n};\n\n/** Vibrance - Modifies the saturation of desaturated colors, leaving saturated colors unmodified. */\nexport const vibrance: ShaderPass<VibranceProps, VibranceProps> = {\n  name: 'vibrance',\n  uniformPropTypes: {\n    amount: {value: 0, min: -1, max: 1}\n  },\n  fs,\n  passes: [{filter: true}]\n};\n"],"mappings":"SAIQA,IAAI;AAEZ,MAAMC,EAAE,GAAGD,IAAK;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAWD,OAAO,MAAME,QAAkD,GAAG;EAChEC,IAAI,EAAE,UAAU;EAChBC,gBAAgB,EAAE;IAChBC,MAAM,EAAE;MAACC,KAAK,EAAE,CAAC;MAAEC,GAAG,EAAE,CAAC,CAAC;MAAEC,GAAG,EAAE;IAAC;EACpC,CAAC;EACDP,EAAE;EACFQ,MAAM,EAAE,CAAC;IAACC,MAAM,EAAE;EAAI,CAAC;AACzB,CAAC"}