{"version":3,"file":"dirlight.js","names":["glsl","project","DEFAULT_MODULE_OPTIONS","lightDirection","Float32Array","getUniforms","opts","arguments","length","undefined","uniforms","dirlight_uLightDirection","fs","dirlight","name","dependencies"],"sources":["../../../../src/modules-webgl1/lighting/dirlight/dirlight.ts"],"sourcesContent":["// luma.gl, MIT license\nimport {ShaderModule} from '@luma.gl/shadertools/lib/shader-module/shader-module';\nimport {glsl} from '../../../lib/glsl-utils/highlight';\nimport type {NumberArray} from '../../../types';\nimport {project} from '../../project/project';\n\n/* eslint-disable camelcase */\n\nexport type DirlightOptions = {\n  lightDirection?: NumberArray\n}\n\nconst DEFAULT_MODULE_OPTIONS: Required<DirlightOptions> = {\n  lightDirection: new Float32Array([1, 1, 2])\n};\n\nfunction getUniforms(opts: DirlightOptions = DEFAULT_MODULE_OPTIONS): Record<string, any> {\n  const uniforms = {};\n  if (opts.lightDirection) {\n    // @ts-expect-error TODO add types\n    uniforms.dirlight_uLightDirection = opts.lightDirection;\n  }\n  return uniforms;\n}\n\nconst fs = glsl`\\\nuniform vec3 dirlight_uLightDirection;\n\n/*\n * Returns color attenuated by angle from light source\n */\nvec4 dirlight_filterColor(vec4 color) {\n  vec3 normal = project_getNormal_World();\n  float d = abs(dot(normalize(normal), normalize(dirlight_uLightDirection)));\n  return vec4(color.rgb * d, color.a);\n}\n`;\n\n/**\n * Cheap lighting - single directional light, single dot product, one uniform\n */\nexport const dirlight: ShaderModule = {\n  name: 'dirlight',\n  // vs // TODO - reuse normal from geometry module\n  fs,\n  getUniforms,\n  dependencies: [project]\n};\n"],"mappings":"SAEQA,IAAI;AAAA,SAEJC,OAAO;AAQf,MAAMC,sBAAiD,GAAG;EACxDC,cAAc,EAAE,IAAIC,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AAC5C,CAAC;AAED,SAASC,WAAWA,CAAA,EAAsE;EAAA,IAArEC,IAAqB,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGL,sBAAsB;EACjE,MAAMQ,QAAQ,GAAG,CAAC,CAAC;EACnB,IAAIJ,IAAI,CAACH,cAAc,EAAE;IAEvBO,QAAQ,CAACC,wBAAwB,GAAGL,IAAI,CAACH,cAAc;EACzD;EACA,OAAOO,QAAQ;AACjB;AAEA,MAAME,EAAE,GAAGZ,IAAK;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAKD,OAAO,MAAMa,QAAsB,GAAG;EACpCC,IAAI,EAAE,UAAU;EAEhBF,EAAE;EACFP,WAAW;EACXU,YAAY,EAAE,CAACd,OAAO;AACxB,CAAC"}