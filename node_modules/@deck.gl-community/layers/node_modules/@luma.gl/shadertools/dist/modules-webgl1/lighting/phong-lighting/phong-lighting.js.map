{"version":3,"file":"phong-lighting.js","names":["lights","lightingShader","INITIAL_MODULE_OPTIONS","getMaterialUniforms","material","ambient","diffuse","shininess","specularColor","lighting_uAmbient","lighting_uDiffuse","lighting_uShininess","lighting_uSpecularColor","map","x","getUniforms","opts","arguments","length","undefined","lighting_uEnabled","gouraudLighting","name","dependencies","vs","defines","LIGHTING_VERTEX","phongLighting","fs","LIGHTING_FRAGMENT"],"sources":["../../../../src/modules-webgl1/lighting/phong-lighting/phong-lighting.ts"],"sourcesContent":["import {lights} from '../lights/lights';\nimport {lightingShader} from './phong-lighting.glsl';\n\n/* eslint-disable camelcase */\n\nexport type PhongLightingProps = {\n  ambient?: number;\n  diffuse?: number;\n  shininess?: number;\n  specularColor?: [number, number, number];\n}\n\nconst INITIAL_MODULE_OPTIONS: {material?: PhongLightingProps} = {};\n\n\nfunction getMaterialUniforms(material: PhongLightingProps) {\n  const {ambient = 0.35, diffuse = 0.6, shininess = 32, specularColor = [30, 30, 30]} = material;\n\n  return {\n    lighting_uAmbient: ambient,\n    lighting_uDiffuse: diffuse,\n    lighting_uShininess: shininess,\n    lighting_uSpecularColor: specularColor.map((x) => x / 255)\n  };\n}\n\nfunction getUniforms(opts: {material?: PhongLightingProps} = INITIAL_MODULE_OPTIONS): Record<string, any> {\n  if (!('material' in opts)) {\n    return {};\n  }\n\n  const {material} = opts;\n\n  if (!material) {\n    return {lighting_uEnabled: false};\n  }\n\n  return getMaterialUniforms(material);\n}\n\nexport const gouraudLighting = {\n  name: 'gouraud-lighting',\n  dependencies: [lights],\n  vs: lightingShader,\n  defines: {\n    LIGHTING_VERTEX: 1\n  },\n  getUniforms\n};\n\nexport const phongLighting = {\n  name: 'phong-lighting',\n  dependencies: [lights],\n  fs: lightingShader,\n  defines: {\n    LIGHTING_FRAGMENT: 1\n  },\n  getUniforms\n};\n"],"mappings":"SAAQA,MAAM;AAAA,SACNC,cAAc;AAWtB,MAAMC,sBAAuD,GAAG,CAAC,CAAC;AAGlE,SAASC,mBAAmBA,CAACC,QAA4B,EAAE;EACzD,MAAM;IAACC,OAAO,GAAG,IAAI;IAAEC,OAAO,GAAG,GAAG;IAAEC,SAAS,GAAG,EAAE;IAAEC,aAAa,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE;EAAC,CAAC,GAAGJ,QAAQ;EAE9F,OAAO;IACLK,iBAAiB,EAAEJ,OAAO;IAC1BK,iBAAiB,EAAEJ,OAAO;IAC1BK,mBAAmB,EAAEJ,SAAS;IAC9BK,uBAAuB,EAAEJ,aAAa,CAACK,GAAG,CAAEC,CAAC,IAAKA,CAAC,GAAG,GAAG;EAC3D,CAAC;AACH;AAEA,SAASC,WAAWA,CAAA,EAAsF;EAAA,IAArFC,IAAqC,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGf,sBAAsB;EACjF,IAAI,EAAE,UAAU,IAAIc,IAAI,CAAC,EAAE;IACzB,OAAO,CAAC,CAAC;EACX;EAEA,MAAM;IAACZ;EAAQ,CAAC,GAAGY,IAAI;EAEvB,IAAI,CAACZ,QAAQ,EAAE;IACb,OAAO;MAACgB,iBAAiB,EAAE;IAAK,CAAC;EACnC;EAEA,OAAOjB,mBAAmB,CAACC,QAAQ,CAAC;AACtC;AAEA,OAAO,MAAMiB,eAAe,GAAG;EAC7BC,IAAI,EAAE,kBAAkB;EACxBC,YAAY,EAAE,CAACvB,MAAM,CAAC;EACtBwB,EAAE,EAAEvB,cAAc;EAClBwB,OAAO,EAAE;IACPC,eAAe,EAAE;EACnB,CAAC;EACDX;AACF,CAAC;AAED,OAAO,MAAMY,aAAa,GAAG;EAC3BL,IAAI,EAAE,gBAAgB;EACtBC,YAAY,EAAE,CAACvB,MAAM,CAAC;EACtB4B,EAAE,EAAE3B,cAAc;EAClBwB,OAAO,EAAE;IACPI,iBAAiB,EAAE;EACrB,CAAC;EACDd;AACF,CAAC"}