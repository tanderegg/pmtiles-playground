{"version":3,"file":"generate-wgsl.js","names":["capitalize","generateWGSLForModule","module","options","generateWGSLUniformDeclarations","wgsl","push","name","uniformName","uniformFormat","Object","entries","uniformTypes","wgslUniformType","join"],"sources":["../../../../src/lib/shader-generator/wgsl/generate-wgsl.ts"],"sourcesContent":["// luma.gl, MIT license\n// Copyright (c) vis.gl contributors\n\nimport {ShaderModule} from '../../../lib/shader-module/shader-module';\nimport {capitalize} from '../utils/capitalize';\n\nexport type WGSLGenerationOptions = {\n  shaderLanguage: 'wgsl';\n};\n\nexport function generateWGSLForModule(module: ShaderModule, options: WGSLGenerationOptions) {\n  return generateWGSLUniformDeclarations(module, options);\n}\n\nexport function generateWGSLUniformDeclarations(module: ShaderModule, options: WGSLGenerationOptions) {\n  const wgsl: string[] = [];\n\n  // => uniform UniformBlockName {\n  wgsl.push(`struct ${capitalize(module.name)} {`);\n\n  for (const [uniformName, uniformFormat] of Object.entries(module?.uniformTypes || {})) {\n    const wgslUniformType = uniformFormat;\n    wgsl.push(`  ${uniformName} : ${wgslUniformType};`);\n  }\n  wgsl.push('};');\n\n  wgsl.push(`var<uniform> ${module.name} : ${capitalize(module.name)};`);\n\n  return wgsl.join('\\n');\n}\n"],"mappings":"SAIQA,UAAU;AAMlB,OAAO,SAASC,qBAAqBA,CAACC,MAAoB,EAAEC,OAA8B,EAAE;EAC1F,OAAOC,+BAA+B,CAACF,MAAM,EAAEC,OAAO,CAAC;AACzD;AAEA,OAAO,SAASC,+BAA+BA,CAACF,MAAoB,EAAEC,OAA8B,EAAE;EACpG,MAAME,IAAc,GAAG,EAAE;EAGzBA,IAAI,CAACC,IAAI,CAAE,UAASN,UAAU,CAACE,MAAM,CAACK,IAAI,CAAE,IAAG,CAAC;EAEhD,KAAK,MAAM,CAACC,WAAW,EAAEC,aAAa,CAAC,IAAIC,MAAM,CAACC,OAAO,CAAC,CAAAT,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEU,YAAY,KAAI,CAAC,CAAC,CAAC,EAAE;IACrF,MAAMC,eAAe,GAAGJ,aAAa;IACrCJ,IAAI,CAACC,IAAI,CAAE,KAAIE,WAAY,MAAKK,eAAgB,GAAE,CAAC;EACrD;EACAR,IAAI,CAACC,IAAI,CAAC,IAAI,CAAC;EAEfD,IAAI,CAACC,IAAI,CAAE,gBAAeJ,MAAM,CAACK,IAAK,MAAKP,UAAU,CAACE,MAAM,CAACK,IAAI,CAAE,GAAE,CAAC;EAEtE,OAAOF,IAAI,CAACS,IAAI,CAAC,IAAI,CAAC;AACxB"}