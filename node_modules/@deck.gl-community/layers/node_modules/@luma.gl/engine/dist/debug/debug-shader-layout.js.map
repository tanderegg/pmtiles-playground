{"version":3,"file":"debug-shader-layout.js","names":["getDebugTableForShaderLayout","layout","name","_layout$varyings","table","header","attributes","length","varyings","attributeDeclaration","glslDeclaration","location","type","stepMode","varyingDeclaration","JSON","stringify","accessor"],"sources":["../../src/debug/debug-shader-layout.ts"],"sourcesContent":["// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport type {ShaderLayout} from '@luma.gl/core';\n\n/**\n * Extracts a table suitable for `console.table()` from a shader layout to assist in debugging.\n * @param layout shader layout\n * @param name app should provide the most meaningful name, usually the model or pipeline name / id.\n * @returns \n */\nexport function getDebugTableForShaderLayout(\n  layout: ShaderLayout,\n  name: string\n): Record<string, Record<string, string>> {\n  const table: Record<string, Record<string, string>> = {};\n\n  const header = 'Values'; // '`Shader Layout for ${name}`;\n\n  if (layout.attributes.length === 0 && !layout.varyings?.length) {\n    return {'No attributes or varyings': {[header]: 'N/A'}};\n  }\n\n  for (const attributeDeclaration of layout.attributes) {\n    if (attributeDeclaration) {\n      const glslDeclaration = `${attributeDeclaration.location} ${attributeDeclaration.name}: ${attributeDeclaration.type}`;\n      table[`in ${glslDeclaration}`] = {[header]: attributeDeclaration.stepMode || 'vertex'};\n    }\n  }\n\n  for (const varyingDeclaration of layout.varyings || []) {\n    const glslDeclaration = `${varyingDeclaration.location} ${varyingDeclaration.name}`;\n    table[`out ${glslDeclaration}`] = {[header]: JSON.stringify(varyingDeclaration.accessor)};\n  }\n\n  return table;\n}\n"],"mappings":"AAYA,OAAO,SAASA,4BAA4BA,CAC1CC,MAAoB,EACpBC,IAAY,EAC4B;EAAA,IAAAC,gBAAA;EACxC,MAAMC,KAA6C,GAAG,CAAC,CAAC;EAExD,MAAMC,MAAM,GAAG,QAAQ;EAEvB,IAAIJ,MAAM,CAACK,UAAU,CAACC,MAAM,KAAK,CAAC,IAAI,GAAAJ,gBAAA,GAACF,MAAM,CAACO,QAAQ,cAAAL,gBAAA,eAAfA,gBAAA,CAAiBI,MAAM,GAAE;IAC9D,OAAO;MAAC,2BAA2B,EAAE;QAAC,CAACF,MAAM,GAAG;MAAK;IAAC,CAAC;EACzD;EAEA,KAAK,MAAMI,oBAAoB,IAAIR,MAAM,CAACK,UAAU,EAAE;IACpD,IAAIG,oBAAoB,EAAE;MACxB,MAAMC,eAAe,GAAI,GAAED,oBAAoB,CAACE,QAAS,IAAGF,oBAAoB,CAACP,IAAK,KAAIO,oBAAoB,CAACG,IAAK,EAAC;MACrHR,KAAK,CAAE,MAAKM,eAAgB,EAAC,CAAC,GAAG;QAAC,CAACL,MAAM,GAAGI,oBAAoB,CAACI,QAAQ,IAAI;MAAQ,CAAC;IACxF;EACF;EAEA,KAAK,MAAMC,kBAAkB,IAAIb,MAAM,CAACO,QAAQ,IAAI,EAAE,EAAE;IACtD,MAAME,eAAe,GAAI,GAAEI,kBAAkB,CAACH,QAAS,IAAGG,kBAAkB,CAACZ,IAAK,EAAC;IACnFE,KAAK,CAAE,OAAMM,eAAgB,EAAC,CAAC,GAAG;MAAC,CAACL,MAAM,GAAGU,IAAI,CAACC,SAAS,CAACF,kBAAkB,CAACG,QAAQ;IAAC,CAAC;EAC3F;EAEA,OAAOb,KAAK;AACd"}