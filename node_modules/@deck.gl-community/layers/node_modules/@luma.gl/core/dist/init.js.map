{"version":3,"file":"init.js","names":["isBrowser","log","lumaStats","initializeLuma","VERSION","__VERSION__","STARTUP_MESSAGE","globalThis","luma","Error","version","stats"],"sources":["../src/init.ts"],"sourcesContent":["import {isBrowser} from '@probe.gl/env';\nimport {log} from './utils/log';\nimport {lumaStats} from './utils/stats-manager';\n\ndeclare global {\n  // eslint-disable-next-line no-var\n  var luma: any\n}\n\n/** \n * By adding the result of init() to Device.VERSION we guarantee it will be called\n * @returns version\n */\nfunction initializeLuma(): string {\n  // Version detection using babel plugin\n  // @ts-expect-error\n  const VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'running from source';\n\n  const STARTUP_MESSAGE = 'set luma.log.level=1 (or higher) to trace rendering';\n  // Assign luma.log.level in console to control logging: \\\n  // 0: none, 1: minimal, 2: verbose, 3: attribute/uniforms, 4: gl logs\n  // luma.log.break[], set to gl funcs, luma.log.profile[] set to model names`;\n\n  if (globalThis.luma && globalThis.luma.VERSION !== VERSION) {\n    throw new Error(`luma.gl - multiple VERSIONs detected: ${globalThis.luma.VERSION} vs ${VERSION}`);\n  }\n\n  if (!globalThis.luma) {\n    if (isBrowser()) {\n      log.log(1, `${VERSION} - ${STARTUP_MESSAGE}`)();\n    }\n\n    globalThis.luma = globalThis.luma || {\n      VERSION,\n      version: VERSION,\n      log,\n\n      // A global stats object that various components can add information to\n      // E.g. see webgl/resource.js\n      stats: lumaStats,\n    };\n  }\n\n  return VERSION;\n}\n\nexport const VERSION = initializeLuma();\n"],"mappings":"AAAA,SAAQA,SAAS,QAAO,eAAe;AAAC,SAChCC,GAAG;AAAA,SACHC,SAAS;AAWjB,SAASC,cAAcA,CAAA,EAAW;EAGhC,MAAMC,OAAO,GAAG,OAAOC,WAAW,KAAK,WAAW,GAAGA,WAAW,GAAG,qBAAqB;EAExF,MAAMC,eAAe,GAAG,qDAAqD;EAK7E,IAAIC,UAAU,CAACC,IAAI,IAAID,UAAU,CAACC,IAAI,CAACJ,OAAO,KAAKA,OAAO,EAAE;IAC1D,MAAM,IAAIK,KAAK,CAAE,yCAAwCF,UAAU,CAACC,IAAI,CAACJ,OAAQ,OAAMA,OAAQ,EAAC,CAAC;EACnG;EAEA,IAAI,CAACG,UAAU,CAACC,IAAI,EAAE;IACpB,IAAIR,SAAS,CAAC,CAAC,EAAE;MACfC,GAAG,CAACA,GAAG,CAAC,CAAC,EAAG,GAAEG,OAAQ,MAAKE,eAAgB,EAAC,CAAC,CAAC,CAAC;IACjD;IAEAC,UAAU,CAACC,IAAI,GAAGD,UAAU,CAACC,IAAI,IAAI;MACnCJ,OAAO;MACPM,OAAO,EAAEN,OAAO;MAChBH,GAAG;MAIHU,KAAK,EAAET;IACT,CAAC;EACH;EAEA,OAAOE,OAAO;AAChB;AAEA,OAAO,MAAMA,OAAO,GAAGD,cAAc,CAAC,CAAC"}