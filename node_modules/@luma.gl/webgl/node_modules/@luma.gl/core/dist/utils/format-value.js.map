{"version":3,"file":"format-value.js","names":["formatArrayValue","v","opts","arguments","length","undefined","maxElts","size","string","i","formatValue","terminator","EPSILON","isInteger","Array","isArray","ArrayBuffer","isView","String","Math","abs","toFixed","toPrecision","decimal","indexOf","slice"],"sources":["../../src/utils/format-value.ts"],"sourcesContent":["/* eslint-disable no-console */\nimport type {NumberArray} from '../types';\n\n/** TODO @deprecated - delete when confident that probe.gl logging implements all opts */\nfunction formatArrayValue(v: NumberArray, opts: {maxElts?: number, size?: number} = {}): string {\n  const {maxElts = 16, size = 1} = opts;\n  let string = '[';\n  for (let i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += `,${i % size === 0 ? ' ' : ''}`;\n    }\n    string += formatValue(v[i], opts);\n  }\n  const terminator = v.length > maxElts ? '...' : ']';\n  return `${string}${terminator}`;\n}\n\n/** TODO @deprecated - delete when confident that probe.gl logging implements all opts */\nexport function formatValue(v: number | NumberArray | unknown, opts: {isInteger?: boolean, size?: number} = {}): string {\n  const EPSILON = 1e-16;\n  const {isInteger = false} = opts;\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v as NumberArray, opts);\n  }\n  if (typeof v !== 'number') {\n    return String(v);\n  }\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n  const string = v.toPrecision(2);\n  const decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n"],"mappings":"AAIA,SAASA,gBAAgBA,CAACC,CAAc,EAAwD;EAAA,IAAtDC,IAAuC,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EACpF,MAAM;IAACG,OAAO,GAAG,EAAE;IAAEC,IAAI,GAAG;EAAC,CAAC,GAAGL,IAAI;EACrC,IAAIM,MAAM,GAAG,GAAG;EAChB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGR,CAAC,CAACG,MAAM,IAAIK,CAAC,GAAGH,OAAO,EAAE,EAAEG,CAAC,EAAE;IAChD,IAAIA,CAAC,GAAG,CAAC,EAAE;MACTD,MAAM,IAAK,IAAGC,CAAC,GAAGF,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,EAAG,EAAC;IAC3C;IACAC,MAAM,IAAIE,WAAW,CAACT,CAAC,CAACQ,CAAC,CAAC,EAAEP,IAAI,CAAC;EACnC;EACA,MAAMS,UAAU,GAAGV,CAAC,CAACG,MAAM,GAAGE,OAAO,GAAG,KAAK,GAAG,GAAG;EACnD,OAAQ,GAAEE,MAAO,GAAEG,UAAW,EAAC;AACjC;AAGA,OAAO,SAASD,WAAWA,CAACT,CAAiC,EAA2D;EAAA,IAAzDC,IAA0C,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EAC5G,MAAMS,OAAO,GAAG,KAAK;EACrB,MAAM;IAACC,SAAS,GAAG;EAAK,CAAC,GAAGX,IAAI;EAChC,IAAIY,KAAK,CAACC,OAAO,CAACd,CAAC,CAAC,IAAIe,WAAW,CAACC,MAAM,CAAChB,CAAC,CAAC,EAAE;IAC7C,OAAOD,gBAAgB,CAACC,CAAC,EAAiBC,IAAI,CAAC;EACjD;EACA,IAAI,OAAOD,CAAC,KAAK,QAAQ,EAAE;IACzB,OAAOiB,MAAM,CAACjB,CAAC,CAAC;EAClB;EACA,IAAIkB,IAAI,CAACC,GAAG,CAACnB,CAAC,CAAC,GAAGW,OAAO,EAAE;IACzB,OAAOC,SAAS,GAAG,GAAG,GAAG,IAAI;EAC/B;EACA,IAAIA,SAAS,EAAE;IACb,OAAOZ,CAAC,CAACoB,OAAO,CAAC,CAAC,CAAC;EACrB;EACA,IAAIF,IAAI,CAACC,GAAG,CAACnB,CAAC,CAAC,GAAG,GAAG,IAAIkB,IAAI,CAACC,GAAG,CAACnB,CAAC,CAAC,GAAG,KAAK,EAAE;IAC5C,OAAOA,CAAC,CAACoB,OAAO,CAAC,CAAC,CAAC;EACrB;EACA,MAAMb,MAAM,GAAGP,CAAC,CAACqB,WAAW,CAAC,CAAC,CAAC;EAC/B,MAAMC,OAAO,GAAGf,MAAM,CAACgB,OAAO,CAAC,IAAI,CAAC;EACpC,OAAOD,OAAO,KAAKf,MAAM,CAACJ,MAAM,GAAG,CAAC,GAAGI,MAAM,CAACiB,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAGjB,MAAM;AACrE"}